{"version":3,"sources":["app.js","components.js","comingSoon.js","run.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"coming_soon.js","sourcesContent":["var App = {\r\n    Controllers: {\r\n        _controllers: [],\r\n        add: function (rout, callback) {\r\n            if (typeof(callback) != 'function')\r\n                return this;\r\n\r\n            if (typeof(rout) == 'object')\r\n                for (var i = 0; i < rout.length; i++)\r\n                    this._controllers.push([rout[i], callback]);\r\n            else if (typeof(rout) == 'string')\r\n                this._controllers.push([rout, callback]);\r\n\r\n            return this;\r\n        },\r\n        call: function () {\r\n            var body_id = $('body:first').attr('id');\r\n            for (var i = 0; i < this._controllers.length; i++)\r\n                if (body_id == 'body.' + this._controllers[i][0])\r\n                    this._controllers[i][1](this._controllers[i][0]);\r\n        }\r\n    },\r\n    Components: {\r\n\r\n        // 0: name\r\n        // 1: callback\r\n        // 2: priority\r\n\r\n        _elements: [],\r\n        _modules: [],\r\n        add: function (module, callback, priority) {\r\n            if (typeof(callback) != 'function')\r\n                return this;\r\n\r\n            this._elements.push([module, callback, priority || 0]);\r\n            return this;\r\n        },\r\n        addModule: function (module, callback, priority) {\r\n            if (typeof(callback) != 'function')\r\n                return this;\r\n\r\n            this._modules.push([module, callback, priority || 0]);\r\n            return this;\r\n        },\r\n        call: function (module) {\r\n            for (var i = 0; i < this._elements.length; i++) {\r\n                var elm = this._elements[i];\r\n                if (_.isArray(module) && _.indexOf(module, elm[0]) != -1)\r\n                    elm[1]();\r\n                else if (module == elm[0])\r\n                    elm[1]();\r\n            }\r\n        },\r\n        init: function (module) {\r\n            this._elements = _.sortBy(this._elements, 2);\r\n            this._modules = _.sortBy(this._modules, 2);\r\n\r\n            for (i in this._elements) {\r\n                var elm = this._elements[i];\r\n\r\n                try {\r\n                    if (!module)\r\n                        elm[1]();\r\n                    else if (_.isArray(module) && _.indexOf(module, elm[0]) != -1)\r\n                        elm[1]();\r\n                    else if (module == elm[0])\r\n                        elm[1]();\r\n                } catch (e) {\r\n                    console.log(elm[0], e);\r\n                }\r\n            }\r\n\r\n            var modules = [];\r\n            $('[data-module]').each(function () {\r\n                modules.push($(this).data('module'));\r\n            });\r\n\r\n            modules = _.uniq(modules);\r\n            for (i in this._modules) {\r\n                var module = this._modules[i],\r\n                    moduleName = module[0];\r\n\r\n                if (_.indexOf(modules, moduleName) != -1) {\r\n                    module[1]();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    Messages: {\r\n        init: function () {\r\n            if (typeof MESSAGE_ERRORS == 'undefined') return;\r\n            this.parse(MESSAGE_ERRORS, 'error');\r\n            this.parse(MESSAGE_SUCCESS);\r\n\r\n            $('body').on('show_message', $.proxy(function () {\r\n                var messages = _.toArray(arguments).slice(1);\r\n                this.parse(messages);\r\n            }, this));\r\n        },\r\n        parse: function ($messages, $type) {\r\n            for (text in $messages) {\r\n                if (text == '_external') {\r\n                    this.parse($messages[text], $type);\r\n                    continue;\r\n                }\r\n\r\n                this.show($messages[text], $type);\r\n            }\r\n        },\r\n        show: function (msg, type, icon) {\r\n            if (!type) type = 'success';\r\n\r\n            window.top.noty({\r\n                layout: 'topRight',\r\n                type: type,\r\n                icon: icon || 'fa fa-ok',\r\n                text: decodeURIComponent(msg)\r\n            });\r\n        },\r\n        error: function (message) {\r\n            this.show(message, 'error');\r\n        }\r\n    },\r\n    Dialog: {\r\n        confirm: function (message, callback, title, className) {\r\n            bootbox.confirm({\r\n                title: title || 'Подтверждение действия',\r\n                message: message,\r\n                className: 'modal-alert modal-warning',\r\n                closeButton: false,\r\n                callback: function (result) {\r\n                    if (result) callback();\r\n                },\r\n                buttons: {\r\n                    confirm: {\r\n                        label: 'Да',\r\n                        className: \"btn-success btn-lg\"\r\n                    },\r\n                    cancel: {\r\n                        label: 'Нет',\r\n                        className: \"btn-default btn-lg\"\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    },\r\n    Loader: {\r\n        counter: 0,\r\n        getLastId: function () {\r\n            return this.counter;\r\n        },\r\n        init: function (container, message) {\r\n            if (container !== undefined && !(container instanceof jQuery)) {\r\n                container = $(container);\r\n            }\r\n            else if (container === undefined) {\r\n                container = $('body');\r\n            }\r\n\r\n            ++this.counter;\r\n\r\n            var $loader = $('<div class=\"_loader_container\"><span class=\"_loader_preloader\" /></div>');\r\n\r\n            if (message !== undefined) {\r\n                if (message instanceof jQuery)\r\n                    $loader.append(message);\r\n                else\r\n                    $loader.append('<span class=\"_loader_message\">' + message + '</span>');\r\n            }\r\n\r\n            return $loader\r\n                .appendTo(container)\r\n                .css({\r\n                    width: container.outerWidth(true),\r\n                    height: container.outerHeight(true),\r\n                    top: container.offset().top - $(window).scrollTop(),\r\n                    left: container.offset().left - $(window).scrollLeft()\r\n                })\r\n                .prop('id', 'loader' + this.getLastId());\r\n        },\r\n        show: function (container, message, speed) {\r\n            var speed = speed || 500;\r\n\r\n            this.init(container, message).fadeTo(speed, 0.7);\r\n            return this.counter;\r\n        },\r\n        hide: function (id) {\r\n            if (!id)\r\n                cont = $('._loader_container');\r\n            else\r\n                cont = $('#loader' + id);\r\n\r\n            cont.stop().fadeOut(400, function () {\r\n                $(this).remove();\r\n            });\r\n        }\r\n    }\r\n}","App.Components\r\n    .add('ajaxSetup', function () {\r\n        $.ajaxSetup({\r\n            headers: {'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')}\r\n        });\r\n    })\r\n    .add('i18nSetup', function () {\r\n        i18n.init({\r\n            lng: 'ru',\r\n            fallbackLng: [],\r\n            resGetPath: '/js/lang/__lng__.json',\r\n        });\r\n    })\r\n    .add('select', function () {\r\n        $(\"select\").select2();\r\n    })\r\n    .add('notySetup', function () {\r\n        $.noty.defaults = $.extend($.noty.defaults, {\r\n            layout: 'topRight',\r\n            theme: 'relax',\r\n            timeout: 3000\r\n        });\r\n    })\r\n    .add('validator.default', function () {\r\n        $.validator.setDefaults({\r\n            highlight: function (element) {\r\n                var elem = $(element);\r\n                if (elem.hasClass(\"select2-offscreen\")) {\r\n                    $(\"#s2id_\" + elem.attr(\"id\") + \" ul\")\r\n                        .closest('.form-group')\r\n                        .addClass('has-error');\r\n                } else {\r\n                    elem\r\n                        .closest('.form-group')\r\n                        .addClass('has-error');\r\n                }\r\n            },\r\n            unhighlight: function (element) {\r\n                var elem = $(element);\r\n\r\n                if (elem.hasClass(\"select2-offscreen\")) {\r\n                    $(\"#s2id_\" + elem.attr(\"id\") + \" ul\")\r\n                        .closest('.form-group')\r\n                        .removeClass('has-error')\r\n                        .find('help-block-hidden')\r\n                        .removeClass('help-block-hidden')\r\n                        .addClass('help-block')\r\n                        .show();\r\n                } else {\r\n                    elem\r\n                        .closest('.form-group')\r\n                        .removeClass('has-error')\r\n                        .find('help-block-hidden')\r\n                        .removeClass('help-block-hidden')\r\n                        .addClass('help-block')\r\n                        .show();\r\n                }\r\n            },\r\n            errorElement: 'p',\r\n            errorClass: 'jquery-validate-error help-block',\r\n            errorPlacement: function (error, element) {\r\n                var $p, has_e, is_c;\r\n                is_c = element.is('input[type=\"checkbox\"]') || element.is('input[type=\"radio\"]');\r\n                has_e = element.closest('.form-group').find('.jquery-validate-error').length;\r\n                if (!is_c || !has_e) {\r\n                    if (!has_e) {\r\n                        element.closest('.form-group').find('.help-block').removeClass('help-block').addClass('help-block-hidden').hide();\r\n                    }\r\n                    error.addClass('help-block');\r\n                    if (is_c) {\r\n                        return element.closest('[class*=\"col-\"]').append(error);\r\n                    } else {\r\n                        $p = element.parent();\r\n                        if ($p.is('.input-group')) {\r\n                            return $p.parent().append(error);\r\n                        } else {\r\n                            return $p.append(error);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })\r\n    .add('tags', function () {\r\n        $('textarea.input-tags').select2({\r\n            tags: [],\r\n            minimumInputLength: 0,\r\n            tokenSeparators: [',', ' ', ';'],\r\n            createSearchChoice: function (term, data) {\r\n                if ($(data).filter(function () {\r\n                        return this.text.localeCompare(term) === 0;\r\n                    }).length === 0) {\r\n                    return {\r\n                        id: term,\r\n                        text: term\r\n                    };\r\n                }\r\n            },\r\n            multiple: true,\r\n            ajax: {\r\n                url: '/api.tags',\r\n                dataType: \"json\",\r\n                data: function (term, page) {\r\n                    return {tag: term};\r\n                },\r\n                results: function (data, page) {\r\n                    if (!data.content) return {results: []};\r\n                    return {results: data.content};\r\n                }\r\n            },\r\n            initSelection: function (element, callback) {\r\n                var data = [];\r\n\r\n                var tags = element.val().split(\",\");\r\n                for (i in tags) {\r\n                    data.push({\r\n                        id: tags[i],\r\n                        text: tags[i]\r\n                    });\r\n                };\r\n                callback(data);\r\n            }\r\n        });\r\n    })\r\n    .add('datepicker', function () {\r\n        var options = {\r\n            format: 'Y-m-d H:i:00',\r\n            lang: LOCALE,\r\n            dayOfWeekStart: 1\r\n        };\r\n\r\n        $('.input-datetime').each(function () {\r\n            var local_options = $.extend({}, options);\r\n            var $self = $(this);\r\n\r\n            if ($self.data('range-max-input')) {\r\n                local_options['onShow'] = function (ct) {\r\n                    var $input = $($self.data('range-max-input'));\r\n                    this.setOptions({\r\n                        maxDate: $input.val() ? $input.val() : false\r\n                    });\r\n                }\r\n            }\r\n\r\n            if ($self.data('range-min-input')) {\r\n                local_options['onShow'] = function (ct) {\r\n                    var $input = $($self.data('range-min-input'));\r\n                    this.setOptions({\r\n                        minDate: $input.val() ? $input.val() : false\r\n                    });\r\n                }\r\n            }\r\n\r\n            $self.datetimepicker(local_options);\r\n        });\r\n\r\n        $('.input-date').each(function () {\r\n            var local_options = $.extend(options, {\r\n                timepicker: false,\r\n                format: 'Y-m-d'\r\n            });\r\n\r\n            var $self = $(this);\r\n\r\n            if ($self.data('range-max-input')) {\r\n                local_options['onShow'] = function (ct) {\r\n                    var $input = $($self.data('range-max-input'));\r\n                    this.setOptions({\r\n                        maxDate: $input.val() ? $input.val() : false\r\n                    });\r\n                }\r\n            } else if ($self.data('range-min-input')) {\r\n                local_options['onShow'] = function (ct) {\r\n                    var $input = $($self.data('range-min-input'));\r\n                    this.setOptions({\r\n                        minDate: $input.val() ? $input.val() : false\r\n                    });\r\n                }\r\n            }\r\n\r\n            $self.datetimepicker(local_options);\r\n        });\r\n    })\r\n    .add('icon', function () {\r\n        $('*[data-icon]').add('*[data-icon-prepend]').each(function () {\r\n            var cls = $(this).data('icon');\r\n            if ($(this).hasClass('btn-labeled')) cls += ' btn-label icon';\r\n\r\n            $(this).html('<i class=\"fa fa-' + cls + '\"></i> ' + $(this).html());\r\n            $(this).removeAttr('data-icon-prepend').removeAttr('data-icon');\r\n        });\r\n\r\n        $('*[data-icon-append]').each(function () {\r\n            $(this).html($(this).html() + '&nbsp&nbsp<i class=\"fa fa-' + $(this).data('icon-append') + '\"></i>');\r\n            $(this).removeAttr('data-icon-append');\r\n        });\r\n    });","App.Components.add('register.validator', function() {\r\n\t$.countdown.setDefaults($.countdown.regionalOptions['ru']);\r\n\t$('#defaultCountdown').countdown({\r\n\t\tuntil: new Date(2016, 1-1, 1)\r\n\t});\r\n\r\n\t$('.cooming-soon-content').backstretch([\r\n\t\t\"/img/coming_soon.jpg\"\r\n\t], {fade: 1000});\r\n\r\n\t// Validation for login form\r\n\t$(\"#registerForm\").validate({\r\n\t\trules: {\r\n\t\t\tusername: {\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\temail: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\temail: true\r\n\t\t\t},\r\n\t\t\tpassword: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\tminlength: 3,\r\n\t\t\t\tmaxlength: 20\r\n\t\t\t},\r\n\t\t\tpassword_confirmation: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\tminlength: 3,\r\n\t\t\t\tmaxlength: 20,\r\n\t\t\t\tequalTo: 'input[name=\"password\"]'\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Messages for form validation\r\n\t\tmessages: {\r\n\t\t\temail: {\r\n\t\t\t\trequired: 'Please enter your email address',\r\n\t\t\t\temail: 'Please enter a VALID email address'\r\n\t\t\t},\r\n\t\t\tpassword: {\r\n\t\t\t\trequired: 'Please enter your password'\r\n\t\t\t},\r\n\t\t\tpassword_confirmation: {\r\n\t\t\t\trequired: 'Please enter your password one more time',\r\n\t\t\t\tequalTo: 'Please enter the same password as above'\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});","$(function () {\r\n\t$.ajaxSetup({\r\n\t\theaders: {\r\n\t\t\t'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n\t\t}\r\n\t});\r\n\r\n\trunApplication();\r\n\r\n\tfunction runApplication() {\r\n\t\tApp.Components.init();\r\n\t\tApp.Controllers.call();\r\n\t\tApp.Messages.init();\r\n\t}\r\n});"],"sourceRoot":"/source/"}