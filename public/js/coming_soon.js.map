{"version":3,"sources":["app.js","components.js","comingSoon.js","run.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"coming_soon.js","sourcesContent":["var App = {\n    Controllers: {\n        _controllers: [],\n        add: function (rout, callback) {\n            if (typeof(callback) != 'function')\n                return this;\n\n            if (typeof(rout) == 'object')\n                for (var i = 0; i < rout.length; i++)\n                    this._controllers.push([rout[i], callback]);\n            else if (typeof(rout) == 'string')\n                this._controllers.push([rout, callback]);\n\n            return this;\n        },\n        call: function () {\n            var body_id = $('body:first').attr('id');\n            for (var i = 0; i < this._controllers.length; i++)\n                if (body_id == 'body.' + this._controllers[i][0])\n                    this._controllers[i][1](this._controllers[i][0]);\n        }\n    },\n    Components: {\n\n        // 0: name\n        // 1: callback\n        // 2: priority\n\n        _elements: [],\n        _modules: [],\n        add: function (module, callback, priority) {\n            if (typeof(callback) != 'function')\n                return this;\n\n            this._elements.push([module, callback, priority || 0]);\n            return this;\n        },\n        addModule: function (module, callback, priority) {\n            if (typeof(callback) != 'function')\n                return this;\n\n            this._modules.push([module, callback, priority || 0]);\n            return this;\n        },\n        call: function (module) {\n            for (var i = 0; i < this._elements.length; i++) {\n                var elm = this._elements[i];\n                if (_.isArray(module) && _.indexOf(module, elm[0]) != -1)\n                    elm[1]();\n                else if (module == elm[0])\n                    elm[1]();\n            }\n        },\n        init: function (module) {\n            this._elements = _.sortBy(this._elements, 2);\n            this._modules = _.sortBy(this._modules, 2);\n\n            for (i in this._elements) {\n                var elm = this._elements[i];\n\n                try {\n                    if (!module)\n                        elm[1]();\n                    else if (_.isArray(module) && _.indexOf(module, elm[0]) != -1)\n                        elm[1]();\n                    else if (module == elm[0])\n                        elm[1]();\n                } catch (e) {\n                    console.log(elm[0], e);\n                }\n            }\n\n            var modules = [];\n            $('[data-module]').each(function () {\n                modules.push($(this).data('module'));\n            });\n\n            modules = _.uniq(modules);\n            for (i in this._modules) {\n                var module = this._modules[i],\n                    moduleName = module[0];\n\n                if (_.indexOf(modules, moduleName) != -1) {\n                    module[1]();\n                }\n            }\n        }\n    },\n    Messages: {\n        init: function () {\n            if (typeof MESSAGE_ERRORS == 'undefined') return;\n            this.parse(MESSAGE_ERRORS, 'error');\n            this.parse(MESSAGE_SUCCESS);\n\n            $('body').on('show_message', $.proxy(function () {\n                var messages = _.toArray(arguments).slice(1);\n                this.parse(messages);\n            }, this));\n        },\n        parse: function ($messages, $type) {\n            for (text in $messages) {\n                if (text == '_external') {\n                    this.parse($messages[text], $type);\n                    continue;\n                }\n\n                this.show($messages[text], $type);\n            }\n        },\n        show: function (msg, type, icon) {\n            if (!type) type = 'success';\n\n            window.top.noty({\n                layout: 'topRight',\n                type: type,\n                icon: icon || 'fa fa-ok',\n                text: decodeURIComponent(msg)\n            });\n        },\n        error: function (message) {\n            this.show(message, 'error');\n        }\n    },\n    Dialog: {\n        confirm: function (message, callback, title, className) {\n            bootbox.confirm({\n                title: title || 'Подтверждение действия',\n                message: message,\n                className: 'modal-alert modal-warning',\n                closeButton: false,\n                callback: function (result) {\n                    if (result) callback();\n                },\n                buttons: {\n                    confirm: {\n                        label: 'Да',\n                        className: \"btn-success btn-lg\"\n                    },\n                    cancel: {\n                        label: 'Нет',\n                        className: \"btn-default btn-lg\"\n                    }\n                }\n            });\n        }\n    },\n    Loader: {\n        counter: 0,\n        getLastId: function () {\n            return this.counter;\n        },\n        init: function (container, message) {\n            if (container !== undefined && !(container instanceof jQuery)) {\n                container = $(container);\n            }\n            else if (container === undefined) {\n                container = $('body');\n            }\n\n            ++this.counter;\n\n            var $loader = $('<div class=\"_loader_container\"><span class=\"_loader_preloader\" /></div>');\n\n            if (message !== undefined) {\n                if (message instanceof jQuery)\n                    $loader.append(message);\n                else\n                    $loader.append('<span class=\"_loader_message\">' + message + '</span>');\n            }\n\n            return $loader\n                .appendTo(container)\n                .css({\n                    width: container.outerWidth(true),\n                    height: container.outerHeight(true),\n                    top: container.offset().top - $(window).scrollTop(),\n                    left: container.offset().left - $(window).scrollLeft()\n                })\n                .prop('id', 'loader' + this.getLastId());\n        },\n        show: function (container, message, speed) {\n            var speed = speed || 500;\n\n            this.init(container, message).fadeTo(speed, 0.7);\n            return this.counter;\n        },\n        hide: function (id) {\n            if (!id)\n                cont = $('._loader_container');\n            else\n                cont = $('#loader' + id);\n\n            cont.stop().fadeOut(400, function () {\n                $(this).remove();\n            });\n        }\n    }\n}","App.Components\r\n    .add('ajaxSetup', function () {\r\n        $.ajaxSetup({\r\n            headers: {'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')}\r\n        });\r\n    })\r\n    .add('i18nSetup', function () {\r\n        i18n.init({\r\n            lng: 'ru',\r\n            fallbackLng: [],\r\n            resGetPath: '/js/lang/__lng__.json',\r\n        });\r\n    })\r\n    .add('select', function () {\r\n        $(\"select\").select2();\r\n    })\r\n    .add('notySetup', function () {\r\n        $.noty.defaults = $.extend($.noty.defaults, {\r\n            layout: 'topRight',\r\n            theme: 'relax',\r\n            timeout: 3000\r\n        });\r\n    })\r\n    .add('validator.default', function () {\r\n        $.validator.setDefaults({\r\n            highlight: function (element) {\r\n                var elem = $(element);\r\n                if (elem.hasClass(\"select2-offscreen\")) {\r\n                    $(\"#s2id_\" + elem.attr(\"id\") + \" ul\")\r\n                        .closest('.form-group')\r\n                        .addClass('has-error');\r\n                } else {\r\n                    elem\r\n                        .closest('.form-group')\r\n                        .addClass('has-error');\r\n                }\r\n            },\r\n            unhighlight: function (element) {\r\n                var elem = $(element);\r\n\r\n                if (elem.hasClass(\"select2-offscreen\")) {\r\n                    $(\"#s2id_\" + elem.attr(\"id\") + \" ul\")\r\n                        .closest('.form-group')\r\n                        .removeClass('has-error')\r\n                        .find('help-block-hidden')\r\n                        .removeClass('help-block-hidden')\r\n                        .addClass('help-block')\r\n                        .show();\r\n                } else {\r\n                    elem\r\n                        .closest('.form-group')\r\n                        .removeClass('has-error')\r\n                        .find('help-block-hidden')\r\n                        .removeClass('help-block-hidden')\r\n                        .addClass('help-block')\r\n                        .show();\r\n                }\r\n            },\r\n            errorElement: 'p',\r\n            errorClass: 'jquery-validate-error help-block',\r\n            errorPlacement: function (error, element) {\r\n                var $p, has_e, is_c;\r\n                is_c = element.is('input[type=\"checkbox\"]') || element.is('input[type=\"radio\"]');\r\n                has_e = element.closest('.form-group').find('.jquery-validate-error').length;\r\n                if (!is_c || !has_e) {\r\n                    if (!has_e) {\r\n                        element.closest('.form-group').find('.help-block').removeClass('help-block').addClass('help-block-hidden').hide();\r\n                    }\r\n                    error.addClass('help-block');\r\n                    if (is_c) {\r\n                        return element.closest('[class*=\"col-\"]').append(error);\r\n                    } else {\r\n                        $p = element.parent();\r\n                        if ($p.is('.input-group')) {\r\n                            return $p.parent().append(error);\r\n                        } else {\r\n                            return $p.append(error);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })\r\n    .add('tags', function () {\r\n        $('textarea.input-tags').select2({\r\n            tags: [],\r\n            minimumInputLength: 0,\r\n            tokenSeparators: [',', ' ', ';'],\r\n            createSearchChoice: function (term, data) {\r\n                if ($(data).filter(function () {\r\n                        return this.text.localeCompare(term) === 0;\r\n                    }).length === 0) {\r\n                    return {\r\n                        id: term,\r\n                        text: term\r\n                    };\r\n                }\r\n            },\r\n            multiple: true,\r\n            ajax: {\r\n                url: '/api.tags',\r\n                dataType: \"json\",\r\n                data: function (term, page) {\r\n                    return {tag: term};\r\n                },\r\n                results: function (data, page) {\r\n                    if (!data.content) return {results: []};\r\n                    return {results: data.content};\r\n                }\r\n            },\r\n            initSelection: function (element, callback) {\r\n                var data = [];\r\n\r\n                var tags = element.val().split(\",\");\r\n                for (i in tags) {\r\n                    data.push({\r\n                        id: tags[i],\r\n                        text: tags[i]\r\n                    });\r\n                };\r\n                callback(data);\r\n            }\r\n        });\r\n    })\r\n    .add('datepicker', function () {\r\n        var options = {\r\n            format: 'Y-m-d H:i:00',\r\n            lang: LOCALE,\r\n            dayOfWeekStart: 1\r\n        };\r\n\r\n        $('.input-datetime').each(function () {\r\n            var local_options = $.extend({}, options);\r\n            var $self = $(this);\r\n\r\n            if ($self.data('range-max-input')) {\r\n                local_options['onShow'] = function (ct) {\r\n                    var $input = $($self.data('range-max-input'));\r\n                    this.setOptions({\r\n                        maxDate: $input.val() ? $input.val() : false\r\n                    });\r\n                }\r\n            }\r\n\r\n            if ($self.data('range-min-input')) {\r\n                local_options['onShow'] = function (ct) {\r\n                    var $input = $($self.data('range-min-input'));\r\n                    this.setOptions({\r\n                        minDate: $input.val() ? $input.val() : false\r\n                    });\r\n                }\r\n            }\r\n\r\n            $self.datetimepicker(local_options);\r\n        });\r\n\r\n        $('.input-date').each(function () {\r\n            var local_options = $.extend(options, {\r\n                timepicker: false,\r\n                format: 'Y-m-d'\r\n            });\r\n\r\n            var $self = $(this);\r\n\r\n            if ($self.data('range-max-input')) {\r\n                local_options['onShow'] = function (ct) {\r\n                    var $input = $($self.data('range-max-input'));\r\n                    this.setOptions({\r\n                        maxDate: $input.val() ? $input.val() : false\r\n                    });\r\n                }\r\n            } else if ($self.data('range-min-input')) {\r\n                local_options['onShow'] = function (ct) {\r\n                    var $input = $($self.data('range-min-input'));\r\n                    this.setOptions({\r\n                        minDate: $input.val() ? $input.val() : false\r\n                    });\r\n                }\r\n            }\r\n\r\n            $self.datetimepicker(local_options);\r\n        });\r\n    })\r\n    .add('icon', function () {\r\n        $('*[data-icon]').add('*[data-icon-prepend]').each(function () {\r\n            var cls = $(this).data('icon');\r\n            if ($(this).hasClass('btn-labeled')) cls += ' btn-label icon';\r\n\r\n            $(this).html('<i class=\"fa fa-' + cls + '\"></i> ' + $(this).html());\r\n            $(this).removeAttr('data-icon-prepend').removeAttr('data-icon');\r\n        });\r\n\r\n        $('*[data-icon-append]').each(function () {\r\n            $(this).html($(this).html() + '&nbsp&nbsp<i class=\"fa fa-' + $(this).data('icon-append') + '\"></i>');\r\n            $(this).removeAttr('data-icon-append');\r\n        });\r\n    });","App.Components.add('register.validator', function() {\r\n\t$.countdown.setDefaults($.countdown.regionalOptions['ru']);\r\n\t$('#defaultCountdown').countdown({\r\n\t\tuntil: new Date(2016, 1-1, 1)\r\n\t});\r\n\r\n\t$('.cooming-soon-content').backstretch([\r\n\t\t\"/img/coming_soon.jpg\"\r\n\t], {fade: 1000});\r\n\r\n\t// Validation for login form\r\n\t$(\"#registerForm\").validate({\r\n\t\trules: {\r\n\t\t\tusername: {\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\temail: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\temail: true\r\n\t\t\t},\r\n\t\t\tpassword: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\tminlength: 3,\r\n\t\t\t\tmaxlength: 20\r\n\t\t\t},\r\n\t\t\tpassword_confirmation: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\tminlength: 3,\r\n\t\t\t\tmaxlength: 20,\r\n\t\t\t\tequalTo: 'input[name=\"password\"]'\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Messages for form validation\r\n\t\tmessages: {\r\n\t\t\temail: {\r\n\t\t\t\trequired: 'Please enter your email address',\r\n\t\t\t\temail: 'Please enter a VALID email address'\r\n\t\t\t},\r\n\t\t\tpassword: {\r\n\t\t\t\trequired: 'Please enter your password'\r\n\t\t\t},\r\n\t\t\tpassword_confirmation: {\r\n\t\t\t\trequired: 'Please enter your password one more time',\r\n\t\t\t\tequalTo: 'Please enter the same password as above'\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});","$(function () {\n\t$.ajaxSetup({\n\t\theaders: {\n\t\t\t'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t}\n\t});\n\n\trunApplication();\n\n\tfunction runApplication() {\n\t\tApp.Components.init();\n\t\tApp.Controllers.call();\n\t\tApp.Messages.init();\n\t}\n});"],"sourceRoot":"/source/"}